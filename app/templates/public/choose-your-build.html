{% extends "layout/base.html" %}

{% block title %}Choose Your Build | WebWise Solutions{% endblock %}

{% block content %}
<div class="page-wrapper" style="max-width:780px; margin:auto; padding:3rem 1rem;">

    <!-- HEADER -->
    <header style="text-align:center; margin-bottom:3rem;">
        <h1 style="font-size:2.4rem; font-weight:800; line-height:1.2; margin-bottom:1rem;">
            Choose Your Build
        </h1>
        <p style="font-size:1.3rem; color:#555; margin-bottom:1rem; font-weight:600;">
            Starter. Growth. Scale.
        </p>
        <p style="font-size:1.1rem; color:#555; margin-top:1rem;">
            By now you understand the difference between a website…<br>
            …and a machine.
        </p>
    </header>

    <!-- INTRO SECTION -->
    <section style="margin-bottom:3rem; text-align:center;">
        <p style="color:#555; line-height:1.7; margin-bottom:1rem;">
            So this isn't about "how many pages you get."
        </p>
        <p style="color:#555; line-height:1.7; margin-bottom:1rem; font-weight:600;">
            It's about how deep your system needs to go right now.
        </p>
        <p style="color:#555; line-height:1.7; margin-bottom:2rem; font-weight:600;">
            Pick the path that matches your reality.
        </p>
    </section>

    <!-- PATH 1 - STARTER -->
    <section id="starter" style="margin-bottom:4rem; padding:2rem; background:#f8f9fa; border-radius:8px; border-left:4px solid #2563eb;">
        <div style="margin-bottom:1.5rem;">
            <h2 style="font-size:1.8rem; font-weight:700; margin-bottom:0.5rem; color:#2563eb;">
                Path #1 — Starter — $1,997
            </h2>
            <p style="color:#555; line-height:1.7; font-weight:600; margin-bottom:1rem;">
                Standard Build Foundation
            </p>
        </div>
        
        <p style="color:#555; line-height:1.7; margin-bottom:1.5rem;">
            Best for small businesses & founders launching fast. A complete, lead-ready business website built on a secure foundation — including AI chat, search indexing, scheduling, owner SMS alerts, and admin visibility. Built once. Runs 24/7. You own everything.
        </p>
        
        <p style="color:#555; line-height:1.7; margin-bottom:1rem; font-weight:600;">
            If you can say:
        </p>
        <p style="color:#555; line-height:1.7; margin-bottom:1.5rem; font-style:italic; padding-left:1rem; border-left:3px solid #2563eb;">
            "What I want already exists somewhere… I just need it done correctly."
        </p>
        <p style="color:#555; line-height:1.7; margin-bottom:1.5rem; font-weight:600;">
            You're in the right place.
        </p>
        
        <p style="color:#555; line-height:1.7; margin-bottom:1rem; font-weight:600;">
            Starter is designed for:
        </p>
        <ul style="list-style:none; padding:0; margin:1.5rem 0;">
            <li style="padding:0.5rem 0; color:#555;">Professional website foundation (Home, About, Services, Contact, etc.)</li>
            <li style="padding:0.5rem 0; color:#555;">Lead capture + booking engine (Cal.com/Calendly integrated)</li>
            <li style="padding:0.5rem 0; color:#555;">AI chat assistant (trained to your business)</li>
            <li style="padding:0.5rem 0; color:#555;">Owner SMS alerts for leads & bookings</li>
            <li style="padding:0.5rem 0; color:#555;">SEO + Google Search Console setup</li>
            <li style="padding:0.5rem 0; color:#555;">Auth-protected admin dashboard</li>
            <li style="padding:0.5rem 0; color:#555;">HTTPS + professional-grade security</li>
        </ul>
        
        <p style="color:#555; line-height:1.7; margin-bottom:1rem; font-weight:600;">
            Starter is NOT for:
        </p>
        <ul style="list-style:none; padding:0; margin:1.5rem 0;">
            <li style="padding:0.5rem 0; color:#555;">New platforms, tools, or complex workflows</li>
            <li style="padding:0.5rem 0; color:#555;">Heavy customization or novel logic</li>
            <li style="padding:0.5rem 0; color:#555;">Stuff like machine learning, data training, or “teach-the-AI-to-think” projects</li>
            
        </ul>
        
        <form style="text-align:center; margin-top:2rem;" onsubmit="return handleOffer3Checkout(event, 'starter')">
            <label style="font-size:0.95rem; display:block; margin-bottom:0.5rem;">
                <input type="checkbox" class="tos-checkbox-offer3" data-plan="starter" required>
                I agree to the <a href="/tos" target="_blank">Terms of Service</a>
            </label>
            <button type="submit" class="cta-button" id="pay-btn-offer3-starter" style="font-size:1.1rem; padding:0.9rem 2rem;" disabled>Start Starter →</button>
        </form>
    </section>

    <!-- PATH 2 - GROWTH -->
    <section id="growth" style="margin-bottom:4rem; padding:2rem; background:#eef6ff; border-radius:8px; border-left:4px solid #2563eb;">
        <div style="margin-bottom:1.5rem;">
            <h2 style="font-size:1.8rem; font-weight:700; margin-bottom:0.5rem; color:#2563eb;">
                Path #2 — Growth (Most Popular) — $3,997
            </h2>
            <p style="color:#555; line-height:1.7; font-weight:600; margin-bottom:1rem;">
                AI Sales + Business Automation Engine
            </p>
        </div>
        
        <p style="color:#555; line-height:1.7; margin-bottom:1.5rem;">
            Growth is for founders who are done doing everything manually — and ready for AI to call, book, and follow up automatically.
        </p>
        
        <p style="color:#555; line-height:1.7; margin-bottom:1rem;">
            This is where the machine becomes a quiet operator:
        </p>
        <ul style="list-style:none; padding:0; margin:1.5rem 0;">
            <li style="padding:0.5rem 0; color:#555; font-weight:600;">capturing</li>
            <li style="padding:0.5rem 0; color:#555; font-weight:600;">responding</li>
            <li style="padding:0.5rem 0; color:#555; font-weight:600;">following up</li>
            <li style="padding:0.5rem 0; color:#555; font-weight:600;">routing</li>
            <li style="padding:0.5rem 0; color:#555; font-weight:600;">converting</li>
        </ul>
        
        <p style="color:#555; line-height:1.7; margin-bottom:1rem; font-weight:600;">
            Growth is right if:
        </p>
        <ul style="list-style:none; padding:0; margin:1.5rem 0;">
            <li style="padding:0.5rem 0; color:#555;">You need an AI agent calling and booking appointments for you</li>
            <li style="padding:0.5rem 0; color:#555;">Multiple systems need to work together (CRM, scheduling, email, SMS)</li>
            <li style="padding:0.5rem 0; color:#555;">Follow-up needs automation, not reminders</li>
            <li style="padding:0.5rem 0; color:#555;">You want a system that reduces revenue leakage</li>
            <li style="padding:0.5rem 0; color:#555;">You're serious about making payments profitable</li>
        </ul>
        
        <p style="color:#555; line-height:1.7; margin-bottom:1rem; font-weight:600;">
            Growth includes:
        </p>
        <ul style="list-style:none; padding:0; margin:1.5rem 0;">
            <li style="padding:0.5rem 0; color:#555;">Everything in Starter</li>
            <li style="padding:0.5rem 0; color:#555;"><strong>AI phone sales agent</strong> (inbound + outbound calling)</li>
            <li style="padding:0.5rem 0; color:#555;">Call scripts engineered for your business</li>
            <li style="padding:0.5rem 0; color:#555;">CRM automation with records, tags & segments</li>
            <li style="padding:0.5rem 0; color:#555;">Multi-step email + SMS follow-ups</li>
            <li style="padding:0.5rem 0; color:#555;">Lead routing based on rules</li>
            <li style="padding:0.5rem 0; color:#555;">Funnel pages built & optimized</li>
            <li style="padding:0.5rem 0; color:#555;">Enterprise-grade security (encryption in transit & at rest)</li>
            <li style="padding:0.5rem 0; color:#555;">Anything that involves machine learning or ai training</li>
        </ul>
        <p style="color:#555; line-height:1.7; margin-bottom:1.5rem;">
            This plan includes powerful AI agents that work right out of the box — answering calls, qualifying leads, and following up using proven logic. 
            But if you're thinking beyond automation — like building a system that learns from data, predicts behavior, or adapts over time — 
            that moves into machine learning territory.
        </p>
        
        <p style="color:#555; line-height:1.7; margin-bottom:1.5rem;">
            We’re talking about training AI using real-world outcomes. Think XGBoost-style models. Behavior scoring. Forecasting. Lead qualification based on historical conversion patterns. 
            That’s not baked into Growth — but we can build it in Scale.
        </p>
        
        
        <p style="color:#555; line-height:1.7; margin-bottom:1.5rem;">
            This is the most popular path because it's the sweet spot:<br>
            not too small, not overbuilt — just powerful.
        </p>
        
        <form style="text-align:center; margin-top:2rem;" onsubmit="return handleOffer3Checkout(event, 'growth')">
            <label style="font-size:0.95rem; display:block; margin-bottom:0.5rem;">
                <input type="checkbox" class="tos-checkbox-offer3" data-plan="growth" required>
                I agree to the <a href="/tos" target="_blank">Terms of Service</a>
            </label>
            <button type="submit" class="cta-button" id="pay-btn-offer3-growth" style="font-size:1.1rem; padding:0.9rem 2rem;" disabled>Start Growth →</button>
        </form>
    </section>

    <!-- PATH 3 - SCALE -->
    <section id="scale" style="margin-bottom:4rem; padding:2rem; background:#f0f9ff; border-radius:8px; border-left:4px solid #2563eb;">
        <div style="margin-bottom:1.5rem;">
            <h2 style="font-size:1.8rem; font-weight:700; margin-bottom:0.5rem; color:#2563eb;">
                Path #3 — Scale — Custom
            </h2>
            <p style="color:#555; line-height:1.7; font-weight:600; margin-bottom:1rem;">
                Enterprise + AI Orchestration
            </p>
        </div>
        
        <p style="color:#555; line-height:1.7; margin-bottom:1.5rem;">
            Scale is for businesses where engineering decisions matter — and where enterprise-grade infrastructure is non-negotiable.
        </p>
        
        <p style="color:#555; line-height:1.7; margin-bottom:1rem; font-weight:600;">
            You're here if:
        </p>
        <ul style="list-style:none; padding:0; margin:1.5rem 0;">
            <li style="padding:0.5rem 0; color:#555;">What you want doesn't exist off-the-shelf</li>
            <li style="padding:0.5rem 0; color:#555;">You need multiple AI agents orchestrating together (not just one)</li>
            <li style="padding:0.5rem 0; color:#555;">Custom backend engineering is required (APIs, webhooks, databases)</li>
            <li style="padding:0.5rem 0; color:#555;">Role-based permissions and audit logs are non-negotiable</li>
            <li style="padding:0.5rem 0; color:#555;">You're deploying for multiple locations, teams, or departments</li>
        </ul>
        
        <p style="color:#555; line-height:1.7; margin-bottom:1rem; font-weight:600;">
            Scale includes:
        </p>
        <ul style="list-style:none; padding:0; margin:1.5rem 0;">
            <li style="padding:0.5rem 0; color:#555;">Everything in Growth</li>
            <li style="padding:0.5rem 0; color:#555;">Multi-agent orchestration (chat, phone, SMS, email working together)</li>
            <li style="padding:0.5rem 0; color:#555;">Custom backend engineering (FastAPI, Node, scalable databases)</li>
            <li style="padding:0.5rem 0; color:#555;">Enterprise security (RBAC, audit logs, data segregation)</li>
            <li style="padding:0.5rem 0; color:#555;">24/7 uptime monitoring & recovery</li>
            <li style="padding:0.5rem 0; color:#555;">Corporate deployment (multi-location, white-label ready)</li>
        </ul>
        
        <div style="text-align:center; margin-top:2rem;">
            <a href="/book-call" class="cta-button" style="font-size:1.1rem; padding:0.9rem 2rem;">Book a Call</a>
        </div>
    </section>

    <script src="https://js.stripe.com/v3/"></script>
    <script>
    // Enable pay button only if TOS is checked
    document.querySelectorAll('.tos-checkbox-offer3').forEach(function(checkbox) {
        checkbox.addEventListener('change', function() {
            const plan = this.getAttribute('data-plan');
            const btn = document.getElementById('pay-btn-offer3-' + plan);
            btn.disabled = !this.checked;
        });
    });

    async function handleOffer3Checkout(event, plan) {
        event.preventDefault();
        const stripe = Stripe('{{ stripe_publishable_key }}');
        const tosCheckbox = document.querySelector('.tos-checkbox-offer3[data-plan="' + plan + '"]');
        const tosChecked = tosCheckbox && tosCheckbox.checked;
        const errorDiv = document.getElementById('checkout-error-offer3');
        if (errorDiv) errorDiv.textContent = '';
        if (!tosChecked) {
            if (errorDiv) errorDiv.textContent = 'You must agree to the Terms of Service.';
            else alert('You must agree to the Terms of Service.');
            return false;
        }
        try {
            const res = await fetch('/create-checkout-session', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ plan: plan, tos_checked: tosChecked })
            });
            const data = await res.json();
            if (data.id) {
                stripe.redirectToCheckout({ sessionId: data.id });
            } else {
                if (errorDiv) errorDiv.textContent = data.detail || 'Error creating Stripe session.';
                else alert(data.detail || 'Error creating Stripe session.');
            }
        } catch (err) {
            if (errorDiv) errorDiv.textContent = 'Network error. Please try again.';
            else alert('Network error. Please try again.');
        }
        return false;
    }
    </script>



    <!-- SECURITY & OWNERSHIP SECTION -->
    <section style="margin-bottom:3rem; padding:1.5rem; background:#f0f9ff; border-radius:8px; border-left:4px solid #10b981;">
        <h2 style="font-size:1.6rem; font-weight:700; margin-bottom:1rem;">
            Security, Ownership & Trust (All Tiers)
        </h2>
        <p style="color:#555; line-height:1.7; margin-bottom:1rem; font-weight:600;">
            Every build includes professional-grade security:
        </p>
        <ul style="list-style:none; padding:0; margin:1rem 0;">
            <li style="padding:0.4rem 0; color:#555;">✓ HTTPS enforced everywhere (encrypted connections)</li>
            <li style="padding:0.4rem 0; color:#555;">✓ Admin dashboard protected with professional-grade auth</li>
            <li style="padding:0.4rem 0; color:#555;">✓ Client/user login fully protected (if applicable to your build)</li>
            <li style="padding:0.4rem 0; color:#555;">✓ Anti-spam and bot protection on all forms</li>
        </ul>
        
        <p style="color:#555; line-height:1.7; margin-bottom:1rem; margin-top:1.5rem; font-weight:600;">
            And here's what we guarantee:
        </p>
        <ul style="list-style:none; padding:0; margin:1rem 0;">
            <li style="padding:0.4rem 0; color:#555;">✓ You retain full ownership of your wallets and business data</li>
            <li style="padding:0.4rem 0; color:#555;">✓ We never custody funds or store your customers' personal data</li>
            <li style="padding:0.4rem 0; color:#555;">✓ We operate as middleware only — integrating systems, not controlling them</li>
            <li style="padding:0.4rem 0; color:#555;">✓ Stripe Connect handles payment compliance (not us)</li>
        </ul>
        
        <p style="color:#555; line-height:1.7; margin-bottom:0; margin-top:1.5rem; font-weight:600;">
            You own your business. We own your satisfaction.
        </p>
    </section>

    <!-- SUPPORT SECTION -->
    <section style="margin-bottom:3rem;">
        <h2 style="font-size:1.8rem; font-weight:700; margin-bottom:1.5rem;">
            Support That Keeps the Engine Healthy
        </h2>
        <p style="color:#555; line-height:1.7; margin-bottom:1rem;">
            Every build includes operational support so your system stays stable after launch.
        </p>
        <p style="color:#555; line-height:1.7; margin-bottom:1.5rem;">
            We keep expectations clear so you always know what’s covered.
        </p>
        
        <p style="color:#555; line-height:1.7; margin-bottom:1rem; font-weight:600;">
            Included support covers:
        </p>
        <ul style="list-style:none; padding:0; margin:1.5rem 0;">
            <li style="padding:0.5rem 0; color:#555;">Keeping the machine running</li>
            <li style="padding:0.5rem 0; color:#555;">Fixing bugs or failures</li>
            <li style="padding:0.5rem 0; color:#555;">Maintaining automations and integrations</li>
            <li style="padding:0.5rem 0; color:#555;">Ensuring your system continues operating as designed</li>
        </ul>
        
        <p style="color:#555; line-height:1.7; margin-bottom:1rem; font-weight:600;">
            Not included in base support:
        </p>
        <ul style="list-style:none; padding:0; margin:1.5rem 0;">
            <li style="padding:0.5rem 0; color:#555;">Ongoing design tweaks or style refreshes</li>
            <li style="padding:0.5rem 0; color:#555;">Copywriting or content production</li>
            <li style="padding:0.5rem 0; color:#555;">Marketing management or frequent asset swaps</li>
        </ul>
        
        <p style="color:#555; line-height:1.7; margin-bottom:1rem;">
            Need design/content help? We offer an add-on monthly plan for creative updates and asset changes. Book a call and we’ll scope it with you.
        </p>
        <div style="text-align:left; margin-top:1rem;">
            <a href="/book-call" class="cta-button" style="padding:0.8rem 1.4rem; font-size:1rem;">Book a Call</a>
        </div>
    </section>

    <!-- OWNERSHIP SECTION -->
    <section style="margin-bottom:3rem;">
        <h2 style="font-size:1.8rem; font-weight:700; margin-bottom:1.5rem;">
            Want to Change Images Without Asking Us? Good.
        </h2>
        <p style="color:#555; line-height:1.7; margin-bottom:1rem;">
            To make this easy, we build your site so you can handle basic content updates yourself.
        </p>
        <p style="color:#555; line-height:1.7; margin-bottom:1rem;">
            For example:
        </p>
        <p style="color:#555; line-height:1.7; margin-bottom:1rem;">
            You'll have an /admin area where you can update a gallery page (add/remove images) without opening a ticket or waiting on us.
        </p>
        <p style="color:#555; line-height:1.7; margin-bottom:2rem;">
            That means you stay in control of your content — and we stay focused on keeping the machine healthy.
        </p>
        
        <h2 style="font-size:1.8rem; font-weight:700; margin-bottom:1.5rem;">
            Ownership, Always.
        </h2>
        <p style="color:#555; line-height:1.7; margin-bottom:1rem; font-weight:600;">
            You own what we build.
        </p>
        <p style="color:#555; line-height:1.7; margin-bottom:1rem;">
            This isn't a rented template.
        </p>
        <p style="color:#555; line-height:1.7; margin-bottom:2rem; font-weight:600;">
            You're buying infrastructure — a machine you control.
        </p>
    </section>

    <!-- FINAL NOTE SECTION -->
    <section style="margin-bottom:3rem; padding:1.5rem; background:#f0fdf4; border-radius:8px; border-left:4px solid #10b981;">
        <h2 style="font-size:1.6rem; font-weight:700; margin-bottom:1rem;">
            Final Note Before You Choose
        </h2>
        <p style="color:#555; line-height:1.7; margin-bottom:1rem;">
            The goal isn't to "pick the perfect plan."
        </p>
        <p style="color:#555; line-height:1.7; margin-bottom:1rem; font-weight:600;">
            The goal is to stop living in manual mode and start building an economy you own.
        </p>
        <p style="color:#555; line-height:1.7; margin-bottom:1rem;">
            Choose the depth that matches where you are today.
        </p>
        <p style="color:#555; line-height:1.7; font-weight:600;">
            The machine can evolve when the business does.
        </p>
    </section>

    <!-- Testimonials Carousel Section -->
    {% if testimonials %}
    <div class="testimonials-carousel-section" style="max-width: 900px; margin: 4rem auto; padding: 0 1.5rem;">
        <h2 style="text-align: center; margin-bottom: 2rem;">What Our Clients Say</h2>
        
        <div style="background: #f9fafb; border-radius: 8px; padding: 2rem; position: relative; min-height: 280px;">
            <!-- Testimonial Container -->
            <div id="testimonial-container" style="display: flex; flex-direction: column; justify-content: space-between; height: 100%;">
                <!-- Star Rating -->
                <div id="testimonial-rating" style="display: flex; gap: 0.25rem; margin-bottom: 1rem;">
                    <!-- Stars will be populated by JavaScript -->
                </div>
                
                <!-- Testimonial Text -->
                <div id="testimonial-text" style="font-size: 1rem; line-height: 1.6; color: #374151; font-style: italic; margin-bottom: 1.5rem;">
                    <!-- Text will be populated by JavaScript -->
                </div>
                
                <!-- Client Info -->
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <div id="testimonial-name" style="font-weight: 600; color: #111827; margin-bottom: 0.25rem;">
                            <!-- Name will be populated by JavaScript -->
                        </div>
                        <div id="testimonial-location" style="font-size: 0.875rem; color: #6b7280; margin-bottom: 0.25rem;">
                            <!-- Location will be populated by JavaScript -->
                        </div>
                        <div id="testimonial-website" style="font-size: 0.875rem;">
                            <!-- Website link will be populated by JavaScript -->
                        </div>
                    </div>
                    
                    <!-- Next Button -->
                    <button id="next-testimonial-btn" style="
                        background: linear-gradient(135deg, #10b981, #059669);
                        color: white;
                        border: none;
                        padding: 0.75rem 1.5rem;
                        border-radius: 6px;
                        font-weight: 600;
                        cursor: pointer;
                        transition: all 0.3s ease;
                    " onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                        Next
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
    (function() {
        const testimonials = JSON.parse('{{ testimonials | tojson }}');
        let currentIndex = 0;

        function displayTestimonial(index) {
            if (!testimonials || testimonials.length === 0) return;
            
            const t = testimonials[index];
            
            // Display rating stars
            const starsHtml = Array(5).fill(0).map((_, i) => 
                i < (t.rating || 5) ? '⭐' : '☆'
            ).join('');
            document.getElementById('testimonial-rating').textContent = starsHtml;
            
            // Display testimonial text
            document.getElementById('testimonial-text').textContent = `"${t.testimonial_text}"`;
            
            // Display client name
            document.getElementById('testimonial-name').textContent = t.client_name || 'Anonymous';
            
            // Display location (with event type if available)
            const locationParts = [];
            if (t.client_location) locationParts.push(t.client_location);
            if (t.event_type) locationParts.push(t.event_type);
            document.getElementById('testimonial-location').textContent = locationParts.join(' • ') || '';
            
            // Display website link if available
            const websiteDiv = document.getElementById('testimonial-website');
            if (t.website_url) {
                websiteDiv.innerHTML = `<a href="${t.website_url}" target="_blank" rel="noopener noreferrer" style="color:#2563eb; text-decoration:none; font-weight:600;">Visit Website →</a>`;
            } else {
                websiteDiv.innerHTML = '';
            }
        }

        // Initialize with first testimonial
        displayTestimonial(0);

        // Next button handler
        document.getElementById('next-testimonial-btn').addEventListener('click', function() {
            currentIndex = (currentIndex + 1) % testimonials.length;
            displayTestimonial(currentIndex);
        });
    })();
    </script>
    {% endif %}

    <!-- SATISFACTION GUARANTEE SECTION -->
    <section style="margin-bottom:3rem; padding:2rem; background:linear-gradient(135deg, #10b981 0%, #059669 100%); color:white; border-radius:8px; text-align:center;">
        <h2 style="font-size:1.8rem; font-weight:700; margin-bottom:1rem; color:white;">
            Satisfaction Guarantee
        </h2>
        <p style="color:white; line-height:1.8; margin-bottom:1rem; font-size:1.05rem;">
            We guarantee that your website foundation, automation, and integrations will be delivered exactly as described, 
            professionally configured, secure, and fully operational at launch. If anything does not meet your expectations, 
            we commit to revising, improving, and refining it until you are completely satisfied — at no additional cost.
        </p>
        <p style="color:white; margin-top:1.5rem; font-style:italic; font-size:1.1rem; font-weight:600;">
            You own your business. We own your satisfaction.
        </p>
    </section>

</div>
{% endblock %}
